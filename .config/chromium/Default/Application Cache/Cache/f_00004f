define("HubsExtension/Deployments/ViewModels/KnownTemplateMetadata",["require","exports","f","i","o","a","HubsExtension/ArmHelpers/ArmApisStartup","HubsExtension/Deployments/DeploymentsClientStrings"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){function l(n,t){var r=t.toLowerCase(),i;return h(n,(function(n,t){n.toLowerCase()===r&&(i=t)})),i}function v(n){return n=n||"",!(n.startsWith("[")&&n.endsWith("]"))}function b(n,t){var i=/^[\d]+$/.test(n),r=/^[a-zA-Z0-9-]+$/.test(n);return Q({valid:r&&!i,message:t})}function k(n,i,u,f,o,h){return new s.CustomValidation("",function(c){var l=function(){if(c){var u=n.uri.format({subscriptionId:f,locationId:o,value:c}),i=void 0;return n.type&&(i={name:c,type:n.type}),Q(e.call(u,n.httpMethod||"GET",i,h,e.makeResourceManagerTelemetry("CustomDeploy.checkNameAvailability"))).then((function(n){return n.nameAvailable||n.available?Q(s.getValidationResult()):Q(s.getValidationResult(n.message||t.nameUnavailable.format(c)))})).catch((function(n)
{var t=r.Azure.buildSimplifiedError(n.jqXHR||n);return Q(s.getValidationResult(t.message))}))}return Q(s.getValidationResult())},a;return i?(a="{0}?api-version={1}".format(i,u),Q(e.call(a,"GET",null,h,e.makeResourceManagerTelemetry("CustomDeploy.checkResourceExistence"))).then((function(){return Q(s.getValidationResult())}),(function(){return l()}))):l()})}function d(n,t,i){var o="parameters('",v=t.resources,r={},u=function(n,t){n=n.toLowerCase();var i=r[n];i||(i=r[n]={});i.validations||(i.validations=[]);i.validations.push(t)};return v.forEach((function(n){var t=(n.type||"").toLowerCase(),v=w[t]||{},r;h(v,(function(t,i){var e=t.split("."),r;try{r=function(n,t){var e=t&&t.length?l(n,t[0]):null,h;e&&(f.isArray(e)?e.forEach((function(n){r(n,t.slice(1))})):r(e,t.slice(1)));n&&typeof n=="string"&&n.toLowerCase().indexOf(o)>-1&&(typeof i.customValidation=="function"&&u(n,new s.CustomValidation("",function(n){return i.customValidation(n)})),h=i.regexValidation,h&&u(n,new s.RegExMatchValidation(h.pattern,
h.message)))};r(n,e)}catch(h){}}));r=(n.name||"").toLowerCase();a[t]&&r.toLowerCase().indexOf(o)>-1&&u(r,new c.Internal.ReservedResourceNameValidator(t,undefined,e.getArmEndpointUri(i),undefined))})),r}function g(n,i,r,o){var s=[],y=function(n){return u.keys(i).first((function(t){return i[t]===n}))};return n.forEach((function(n){var u=(n.type||"").toLowerCase(),p=w[u]||{},i=n.name;a[u]&&v(i)&&s.push(new c.Internal.ReservedResourceNameValidator(u,undefined,e.getArmEndpointUri(o),undefined).validate(i).then((function(n){var r="",f=y(i);return r=f?t.invalidParameter.format(f,i,"name",i,u):t.invalidValue.format(i,"name",i,u),n.message=r+n.message,n})));h(p,(function(e,h){var a=e.split("."),c;try{c=function(a,p){var b=p&&p.length?l(a,p[0]):null,w,g,d,tt,nt,it;b&&(f.isArray(b)?b.forEach((function(n){c(n,p.slice(1))})):c(b,p.slice(1)));a&&typeof a=="string"&&v(a)&&(w="",g=y(a),w=g?t.invalidParameter.format(g,a,e,i,u):t.invalidValue.format(a,e,i,u),typeof h.customValidation=="function"&&s.push(h.customValidation(
a).then((function(n){return n.message=w+n.message,n}))),d=h.regexValidation,d&&(tt=new RegExp(d.pattern),s.push(Q({valid:tt.test(a),message:w+d.message}))),nt=h.checkNameAvailability,nt&&(it=k(nt,n.id,n.apiVersion,r,n.location,o),s.push(it.validate(a).then((function(n){return n.message=w+n.message,n})))))};c(n,a)}catch(p){}}))})),s}var c=i.Azure,s=i.ViewModels,t=o.Validations,h=i.forEachKey,a={"microsoft.storage/storageaccounts":!0,"microsoft.sql/servers":!0,"microsoft.sql/servers/databases":!0,"microsoft.web/sites":!0},y={regexValidation:{pattern:"^[^_\\W]([\\w-.]{0,78}[\\w])?$",message:t.networkName}},p={regexValidation:{pattern:"^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]).){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(/([0-9]|[1-2][0-9]|3[0-2]))$",message:t.addressPrefix}},w={"microsoft.compute/virtualmachines":{name:{customValidation:function(n){return Q(b(n,t.vmName))}},"properties.osProfile.adminUsername":{customValidation:function(n){var i=!/[\\/\"\"\[\]:|<>+=;,$ ?*@]+/.test(
n)&&!n.endsWith("."),r=t.adminUsername;return i&&(i=!~["administrator","admin","user","user1","test","user2","test1","user3","admin1","1","123","a","actuser","adm","admin2","aspnet","backup","console","david","guest","john","owner","root","server","sql","support","support_388945a0","sys","test2","test3","user4","user5"].indexOf(n||""),r=t.adminUsernameDisallowed),Q({valid:i,message:r})}},"properties.osProfile.adminPassword":{customValidation:function(n){var i=n||"",r=/[a-z]+/.test(n),u=/[A-Z]+/.test(n),f=/[0-9]+/.test(n),e=/[ `~!@#$%^&*()=+_\[\]{}\|;:.\/'\",<>?]+/.test(n),o=(f?1:0)+(r?1:0)+(e?1:0)+(u?1:0);return Q({valid:i.length>=12&&i.length<=72&&o>2,message:t.adminPassword})}}},"microsoft.network/virtualnetworks":{name:y,"properties.addressspace.addressPrefixes":p,"properties.subnets.properties.addressPrefix":p,"properties.subnets.name":y},"microsoft.network/publicipaddresses":{"properties.dnsSettings.domainNameLabel":{customValidation:function(n){var i=/^[a-z][a-z0-9-]{1,61}[a-z0-9]$/.
test(n);return Q({valid:i,message:t.domainNameLabel})},checkNameAvailability:{uri:"/subscriptions/{subscriptionId}/providers/Microsoft.Network/locations/{locationId}/CheckDnsNameAvailability?domainNameLabel={value}&api-version=2015-06-15"}}},"microsoft.storage/storageaccounts":{name:{checkNameAvailability:{uri:"/subscriptions/{subscriptionId}/providers/Microsoft.Storage/checkNameAvailability?api-version=2016-01-01",type:"Microsoft.Storage/storageAccounts",httpMethod:"POST"}}}};n.getMetadata=d;n.checkResourceValidity=g})(s||(s={})),s}));define("HubsExtension/Deployments/ViewModels/CustomDeploymentBladeVM",["require","exports","f","i","o","a","ko","Fx/Controls/Button","Fx/Controls/DropDown","Fx/Controls/HotSpot","FxObsolete/Controls/LocationDropDown","FxObsolete/Controls/ResourceGroupDropDown","FxObsolete/Controls/SubscriptionDropDown","HubsExtension/Deployments/DeploymentsClientStrings","HubsExtension/_generated/BladeReferences","HubsExtension/Common/CloudNameHelpers","HubsExtension/Deployments/DeploymentsCommon",
"HubsExtension/Deployments/HubsProvisioner","HubsExtension/Deployments/ViewModels/KnownTemplateMetadata"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k){"use strict";var d;return (function(n){function ct(n){return w.getTemplateObject(n)||{}}function et(n){return n=(n||"").toLowerCase(),n==="string"||n==="securestring"}function ei(n){return(n||"").toLowerCase()==="int"}function pt(n,i,r){var u=t[""+i]||i,f={htmlTemplate:e.observable("<div class='ext-hubs-customdeploy-header' data-bind='css:{ ext-hubs-customdeploy-large-width: isLeftAligned() }'>"+u+"<\/div>"),innerViewModel:{isLeftAligned:r}};return new nt.CustomHtml.ViewModel(n,f)}function oi(n,i,r){var f=new nt.CheckBox.ViewModel(n,{inlineLabel:!0,label:e.observable(t.legalCheckbox),validations:e.observableArray([new d.CustomValidation(t.acceptTermsValidationMessage,function(n){return Q({valid:!!n,message:t.acceptTermsValidationMessage})})])}),u=function(n,t,i){var r=i?"class='ext-hubs-customdeploy-legaltext-link'":"";return"<a href='{0}' {1} target='_blank'>{2}<\/a>".
format(t,r,n)},o="";r&&(o=u(t.templateReadme,r,!0));var h=o+u(t.marketplaceTerms,tt.fx.environment.hubsLinks.marketplaceTerms,!0)+u(t.azureMarketplace,tt.fx.environment.hubsLinks.marketplace,!0)+"<br/><br/>",c={htmlTemplate:e.observable("<div class='ext-hubs-customdeploy-legaltext' data-bind='css:{ ext-hubs-customdeploy-large-width: isLeftAligned() }'>\n                       "+h+"\n                       <div class='ext-hubs-customdeploy-legaltext-text' data-bind='sanitizedHtml: legalText'><\/div>\n                 <\/div>\n                 <div data-bind='pcControl: checkbox'><\/div>"),innerViewModel:{checkbox:f,legalText:t.legalText.format(u(t.marketplaceTerms,tt.fx.environment.hubsLinks.marketplaceTerms,!1),u(t.azureMarketplace,tt.fx.environment.hubsLinks.marketplace,!1)),isLeftAligned:i}},s=new nt.CustomHtml.ViewModel(n,c);return f.valid.subscribe(n,s.valid),s}function si(n,t){var r={};return n.forEach((function(n){var o=e.toJS(n),u=o.name,s=o.value,f;i.hasOwnProperty(t,u)&&(f=t[u],
f&&i.deepEquals(s,f)||(r[w.getOriginalParamName(u)]=s))})),r}function lt(n,t,i,r){var u=new dt(n,{clickableLink:e.observable(new d.ClickableLink(e.observable(t)))});return u.clickableLink().onLinkOpened=function(){it.trace({source:rt,action:ti,data:{telemetryId:i,link:r}})},u}function hi(n){return n.filter((function(n){return(n.location||"").toLowerCase().indexOf("[resourcegroup().location]")>-1})).map((function(n){return(n.type||"").toLowerCase()})).unique().filter((function(n){return n.indexOf("[")<0}))}var g=i.Base,wt=i.Azure,d=i.ViewModels,li=wt.ResourceManager,bt=r.Extension.CloudName,kt=d.ActionBars.CreateActionBar,nt=d.Forms,it=g.Diagnostics.Telemetry,dt=d.Controls.HotSpot.LinkViewModel,ot=g.Images.Polychromatic,tt=window,st=i.forEachKey,ut=i.isNullOrUndefined,ft=tt.fx.environment.quickStartTemplateDetailsUri||"",at=i.isFeatureEnabled("turnoffclientsidevalidation"),ht=e.observable(nt.LabelPosition.Top),vt="CreateFromTemplateDataModelMetadata",t=v.CustomDeploy,gt="basics",ni="othergroup",
rt="DeployToAzure",yt="Launched",ti="OpenLink",ii="Deploying",ri="LoadedCommonTemplate",ui="LoadedQuickstartTemplate",fi="EditQuickstartTemplate",ci=(function(n){function r(r,u,f){var o=this,s;n.call(this,r);this.editTemplateIcon=e.observable(g.Images.Edit({palette:3}));this.editTemplateText=e.observable(t.editTemplate);this.isLeftAligned=e.observable(!0);this.templateHeader=e.observable(t.templateHeader);this.templateIcon=e.observable(ot.Module());this.templateName=e.observable("");this.templateDescription=e.observable("");this.editParametersIcon=e.observable(g.Images.Edit({palette:3}));this.editParametersText=e.observable(t.editParameters);this.showEditParametersButton=e.observable(!1);this.learnMoreHotSpot=e.observable(null);this.learnMoreIcon=e.observable(ot.Info());this.learnMoreLink=tt.fx.environment.hubsLinks.templateDeployment;this.emptyTemplate=e.observable(!1);this.strings=t;this.commonTemplates=e.observableArray([{icon:e.observable(g.Images.Polychromatic.VirtualMachine()),text:
e.observable(t.createLinuxVM),optionClick:function(){return o._loadTemplateAndSetInEditScope("https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/101-vm-simple-linux/azuredeploy.json")}},{icon:e.observable(g.Images.Polychromatic.VirtualMachine()),text:e.observable(t.createWindowsVM),optionClick:function(){return o._loadTemplateAndSetInEditScope("https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/101-vm-simple-windows/azuredeploy.json")}},{icon:e.observable(g.Images.Polychromatic.Website()),text:e.observable(t.createWebApp),optionClick:function(){return o._loadTemplateAndSetInEditScope("https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/201-cdn-with-web-app/azuredeploy.json")}},{icon:e.observable(g.Images.Polychromatic.Database()),text:e.observable(t.createSQLDatabase),optionClick:function(){return o._loadTemplateAndSetInEditScope("https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/201-sql-database-transparent-encryption-create/azuredeploy.json")}
}]);this.editTemplateClick=function(){return o._container.openBlade(o._getEditorBladeReference())};this.statusBar=e.observable();this._templateUri="";this._gitHubLink="";this._defaultValues={};this._cloudName=null;this._rgDropdownClass=e.observable("ext-hubs-customdeploy-leftalign-rgdropdown");this._resourcePropertyMetadata={};this._resourceTypesFilterForLocation=e.observableArray([]);this._container=r;this._dataContext=f;this.title=e.observable(v.deployFromTemplateBladeTitle);this.subtitle=e.observable(v.deployFromTemplateBladeSubtitle);this.icon=e.observable(ot.Gear());i.Data.Metadata.setTypeMetadata(vt,{properties:{subscription:null,resourceGroup:null,location:null,template:null,parameters:null},entityType:!0});r.width.subscribe(r,(function(n){n>710?(o.isLeftAligned(!0),o._rgDropdownClass("ext-hubs-customdeploy-leftalign-rgdropdown")):(o.isLeftAligned(!1),o._rgDropdownClass(""))}));this.actionBar=new kt.ViewModel(r);this.actionBar.actionButtonLabel(1);this.valid.subscribe(r,this.actionBar.
valid);this.parameterProvider=new d.ParameterProvider(r,{mapIncomingDataForEditScopeAsync:this._mapIncomingDataForEditScopeAsync.bind(this),mapOutgoingDataForCollector:function(n){return n},editScopeMetadataType:vt});this.editScope=this.parameterProvider.editScope;this.armProvisioner=new b.HubsProvisioner(r,u,{supplyTemplateDeploymentOptions:this._supplyProvisioningPromise.bind(this),actionBar:this.actionBar,parameterProvider:this.parameterProvider,createFeatures:40,postValidationCallback:this._postValidationCallback.bind(this)});this._initializeGitHubDropdown();this.subscriptionsDropDown=a.create(r,{form:this,accessor:this.createEditScopeAccessor((function(n){return n.subscription})),filterPlaceholder:v.selectSubscription,validations:e.observableArray([new d.RequiredValidation(v.selectSubscription)])});this.locationsDropDown=c.create(r,{form:this,accessor:this.createEditScopeAccessor((function(n){return n.location})),subscriptionIdObservable:this.subscriptionsDropDown.subscriptionId,resourceTypesObservable:
this._resourceTypesFilterForLocation,filterPlaceholder:v.selectLocation,validations:e.observableArray([new d.RequiredValidation(v.selectLocation)])});s=this.resourceGroupDropDown=l.create(r,{form:this,accessor:this.createEditScopeAccessor((function(n){return n.resourceGroup})),label:e.observable(v.resourceGroup),subscriptionIdObservable:this.subscriptionsDropDown.subscriptionId,filterPlaceholder:v.selectResourceGroup,createNewPlaceholder:v.createResourceGroup,validations:e.observableArray([new d.RequiredValidation(v.selectResourceGroup),new d.CustomValidation("",function(n){if(s.value().mode===1||!(s.value().value||{}).name)return i.ViewModels.getValidationResultPromise();var r=o.resourceGroupDropDown.getObjectByName(n),f=r&&r.value&&r.value.location,u=o.locationsDropDown.fetchedValues().first((function(n){return n.name===f}));return u?(o.locationsDropDown.value(u),o.locationsDropDown.disabled(!0),i.ViewModels.getValidationResultPromise()):(o.locationsDropDown.disabled(!1),Q({message:t.rgLocationNotAllowed,
valid:!1}))})])});this.resourceGroupDropDown.value.subscribe(r,(function(n){n&&n.mode===1&&o.locationsDropDown.disabled(!1)}));e.reactor(r,(function(){var i=o._rgDropdownClass(),n=o.resourceGroupDropDown.control().children(),t;n&&n.length===2&&(t=n[1],t.cssClass(i))}));this.locationsDropDown.fetchedValues.subscribe(r,(function(n){Q.nextTick((function(){var t=o.resourceGroupDropDown.value(),r,i;t&&t.mode===1?o.locationsDropDown.disabled(!1):(r=t&&t.value&&t.value.location,i=n.first((function(n){return n.name===r})),i?(o.locationsDropDown.value(i),o.locationsDropDown.disabled(!1)):o.locationsDropDown.disabled(!1))}))}));this.generalSection=new nt.Section.ViewModel(r,{children:e.observableArray([]),style:e.observable(3),width:e.observable(100)});this.sections.push(this.generalSection);this.editTemplateHotSpot=new h.ViewModel2(r,{supplyBladeReference:function(){return o._getEditorBladeReference()}});this.editParametersHotSpot=new h.ViewModel2(r,{supplyBladeReference:function(){return p.addCloudNameToBladeReference(
o._cloudName,new y.ParametersFileEditorBladeReference({supplyInitialData:function(){var n={$schema:"https://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#",contentVersion:"1.0.0.0",parameters:{}},r=ct(o._dataModel.template()),t=r.parameters;return t&&st(t,(function(t){var r=i.find(o._dataModel.parameters(),(function(n){return n.name()===t}));r&&(n.parameters[t]={value:r.value()||null})})),{parametersFileContents:JSON.stringify(n,null,2)}},receiveResult:function(n){var t;try{t=JSON.parse(n)}catch(i){}t&&o._dataModel.parameters().forEach((function(n){var i=t.parameters[n.name()];i&&n.value(i.value)}))}}))}});this.editScope.fxOnce(r,(function(){o._dataModel.template.subscribeAndRun(r,(function(n){var u,s,f,e;if(n){if(u=ct(n),s=!i.isEmpty(u.parameters),o.showEditParametersButton(s&&i.isFeatureEnabled("parameterseditor")),f=(u.resources||[]).length,f){at||(o._resourcePropertyMetadata=k.getMetadata(r,u,o._cloudName));e=hi(u.resources);e.push("microsoft.resource/resourcegroups");
o._resourceTypesFilterForLocation(e);o._defaultValues={};o._updateParametersFormFields(r,u.parameters);o.templateDescription(f===1?t.resourceCountSingle.format(f):t.resourceCountPlural.format(f));o.actionBar.disabled(!1);o.emptyTemplate(!1);return}}else o.showEditParametersButton(!1);o.emptyTemplate(!0);o.actionBar.disabled(!0)}))}))}return __extends(r,n),r.prototype.onInputsSet=function(n){return this._cloudName=bt.readFromInputs(n),null},r.prototype._initializeGitHubDropdown=function(){var i=this,u=e.observableArray([]),r=s.create(this._container,{label:v.pickTemplate,infoBalloonContent:v.loadTemplateInfoBalloon,filter:!0,filterPlaceholder:t.filter,items:u}),a=o.create(this._container,{text:e.observable(t.loadButton),onClick:function(){var n=r.value();if(n)return it.trace({source:rt,action:ui,data:{template:n}}),w.loadAzureDeployTemplate(n).then((function(t){i._updateTemplateDetailsForGitHubTemplate(n);i._dataModel.template(t);i._templateUri=w.getQuickstartTemplateUri(n)}))}}),y=o.create(
this._container,{text:e.observable(t.editButton),onClick:function(){var n=r.value();if(n)return it.trace({source:rt,action:fi,data:{template:n}}),w.loadAzureDeployTemplate(n).then((function(t){i._container.openBlade(i._getEditorBladeReference(t)).finally((function(){i._updateTemplateDetailsForGitHubTemplate(n);i._dataModel.template(t);i._templateUri=w.getQuickstartTemplateUri(n)}))}))}}),f=e.observable(!1),h=this._dataContext.quickStartTemplatesQueryCache.createView(this._container,{interceptNotFound:!1}),c=this._dataContext.quickStartTemplateMetadataEntityCache.createView(this._container,{interceptNotFound:!1}),n,l;h.items.mapInto(this._container,(function(n,t){return{text:e.observable(t),value:t}}),u);c.item.subscribe(this._container,(function(t){try{var i=JSON.parse(t);n.hasMetadata(!0);n.summary(i.summary);n.githubUsername(i.githubUsername);n.dateUpdated(i.dateUpdated);n.link(ft+"/"+r.value());n.linkText(v.linkText)}catch(u){n.hasMetadata(!1);n.link(ft+"/"+r.value());n.linkText(v.errorGettingTemplateMetadata)}
}));r.isPopUpOpen.fxOnce(this._container,(function(){u().length===0&&h.fetch({}).catch((function(){n.link(ft);n.linkText(v.errorLoadingTemplates)}))}));r.value.subscribe(this._container,(function(n){n&&r.items().some((function(t){return t.value===n}))?(c.fetch(n),f(!0)):f(!1)}));n={templateDropdown:r,hasMetadata:e.observable(!1),summary:e.observable(""),githubUsername:e.observable(""),dateUpdated:e.observable(""),link:e.observable(""),linkText:e.observable(v.linkText),addButtonVM:a,editButtonVM:y,buttonVisible:f};l=new d.Forms.CustomHtml.ViewModel(this._container,{htmlTemplate:'<div data-bind="pcControl: templateDropdown"><\/div><!-- ko if: hasMetadata() --><div style="margin: 10px auto" data-bind="text: summary"><\/div>'+('<div><b style="margin-right: 5px">'+v.author+'<\/b><span data-bind="text: githubUsername"><\/span><\/div>')+('<div><b style="margin-right: 5px">'+v.lastUpdated+'<\/b><span data-bind="text: dateUpdated"><\/span><\/div>')+'<!-- /ko --><!-- ko if: link() --><a class="msportalfx-link-primary" style="display: block;" target="_blank" data-bind="attr: { href: link, title: linkText }, text: linkText"><\/a><!-- /ko --><div style="margin: 10px 10px 10px auto; display: block;" data-bind="pcControl: addButtonVM, visible: buttonVisible"><\/div><div style="margin: 10px auto; display: block;" data-bind="pcControl: editButtonVM, visible: buttonVisible"><\/div>',
innerViewModel:n});this.quickstartTemplateCustomHtml=l},r.prototype._updateParametersFormFields=function(n,r){var o=this,u=[],f=[{name:gt,fields:[]}];i.isEmpty(r)||st(r,(function(t,r){var e=o._generateFormField(n,t,r),s=r.metadata&&typeof r.metadata.group=="string"&&r.metadata.group||ni,u=i.find(f,(function(n){return n.name.localeCompareIgnoreCase(s)===0}));u?u.fields.push(e):(u={name:s,fields:[e]},f.push(u))}));e.utils.arrayPushAll(f[0].fields,[this.subscriptionsDropDown,this.resourceGroupDropDown,this.locationsDropDown]);f.forEach((function(t){u.push(pt(n,t.name,o.isLeftAligned));e.utils.arrayPushAll(u,t.fields)}));u.push(pt(n,t.legalHeader,this.isLeftAligned),oi(n,this.isLeftAligned,this._gitHubLink));this.generalSection.children(u)},r.prototype._generateFormField=function(n,t,r){var o=r.type&&r.type.toLowerCase()||"",tt=r.defaultValue,l=w.getNormalizedParamNameForEditScope(t),it=this._dataModel.parameters(),y=i.find(this._dataModel.parameters(),(function(n){return n.name()===l})),p,u,h,b,k,
c,rt,g,a,ft,ot;return y?y.type(o):(y={name:e.observable(l),type:e.observable(o),value:e.observable(tt)},it.push(y)),this.editScope().resetValue(this.createEditScopeAccessor((function(n){return n.parameters})),{newInputValue:it}),p=this.createCustomEditScopeAccessor({readFromEditScope:function(n){var u=n.parameters(),t=i.find(u,(function(n){return n.name.peek()===l})),f=t.type(),r=t.value();return et(f)?r:JSON.stringify(r)},writeToEditScope:function(n,t){var f=n.parameters(),r=i.find(f,(function(n){return n.name.peek()===l})),e=r.type(),u;if(et(e))r.value(t);else try{u=JSON.parse(t);r.value(u)}catch(o){r.value(t)}}}),this._defaultValues[l]=tt,u=e.observableArray([]),ut(tt)&&u.push(new d.RequiredValidation(v.requiredFieldValidationMessage)),et(o)&&(ut(r.maxLength)||u.push(new d.MaxLengthValidation(r.maxLength)),ut(r.minLength)||u.push(new d.MinLengthValidation(r.minLength))),ei(o)&&(ut(r.maxValue)||u.push(new d.MaxValueValidation(r.maxValue)),ut(r.minValue)||u.push(new d.MinValueValidation(r.minValue))),
et(o)||u.push(new d.CustomValidation(v.unableToJsonParseValidationMessage.format(o),function(n){if(!!n)try{JSON.parse(n)}catch(t){return Q.resolve({message:v.unableToJsonParseValidationMessage.format(o),valid:!1})}return i.ViewModels.getValidationResultPromise()})),c=r.metadata,c&&(h=c.label,b=c.description||c.Description,k=c.sublabel),h=h||t.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3").replace(/^./,(function(n){return n.toUpperCase()})),rt="[parameters('"+t.toLowerCase()+"')]",st(this._resourcePropertyMetadata,(function(n,t){if(n.toLowerCase()===rt){var i=t.validations||[];e.utils.arrayPushAll(u,i)}})),g=r.allowedValues,f.isArray(g)&&g.length>0||o==="bool"?(a=e.observableArray([]),o==="bool"?(a.push({text:e.observable("true"),value:"true"}),a.push({text:e.observable("false"),value:"false"})):g.forEach((function(n){var t=typeof n=="string"?n:JSON.stringify(n);a.push({text:e.observable(t),value:t})})),new s.ViewModel(n,this,p,{label:e.observable(h),items:a,
validations:u,infoBalloonContent:e.observable(b),subLabel:e.observable(k),labelPosition:ht})):o==="securestring"?(ft={label:e.observable(h),validations:u,infoBalloonContent:e.observable(b),subLabel:e.observable(k),labelPosition:ht},new nt.PasswordBox.ViewModel(n,this,p,ft)):(ot={label:e.observable(h),validations:u,infoBalloonContent:e.observable(b),subLabel:e.observable(k),labelPosition:ht},new nt.TextBox.ViewModel(n,this,p,ot))},u.defineProperty(r.prototype,"_dataModel",{get:function(){var n=this.editScope();return n&&n.root},enumerable:!0,configurable:!0}),r.prototype._getEditorBladeReference=function(n){var i=this;return p.addCloudNameToBladeReference(this._cloudName,new y.TemplateEditorBladeReference({supplyInitialData:function(){return{template:n||i._dataModel.template()}},receiveResult:function(n){n!==i._dataModel.template()&&(i._dataModel.templateCustomized(!0),i.templateName(t.customizedTemplate),i.title(v.deployFromTemplateBladeTitle),i.subtitle(v.deployFromTemplateBladeSubtitle),
i._dataModel.template(n),i.statusBar(null))},supplyProviderConfig:function(){return{readOnlyTemplate:!1}}}))},r.prototype._mapIncomingDataForEditScopeAsync=function(){var t={},r={subscription:e.observable(null),resourceGroup:e.observable(null),location:e.observable(null),template:e.observable(null),parameters:e.observableArray([]),legalterms:e.observable(!1),templateCustomized:e.observable(!1)},f=this.parameterProvider.configFromCollector()||{},c=f.inlineTemplate,o=f.uri,n,s,h;if(t.readOnly=!!f.readOnlyTemplate,n=this.armProvisioner.armProvisioningConfig&&this.armProvisioner.armProvisioningConfig.galleryCreateOptions,n){if(!n.resourceGroupName||(r.resourceGroup({mode:0,value:{name:n.resourceGroupName,location:n.resourceGroupLocation}}),r.location({displayName:n.resourceGroupLocationDisplayName,name:n.resourceGroupLocation}),this.locationsDropDown.disabled(!0)),!o){var l=n.deploymentTemplateFileUris||{},a=u.keys(l),v=a[0];o=l[v];t.template="none"}s=n.launchingContext;s&&(t.telemetryId=this.
_telemetryId=s.telemetryId,t.context=this._context=s.source);t.package=n.galleryItem&&n.galleryItem.id}if(h=f.inlineParameters,h&&i.forEachKey(h,(function(n,t){!t||r.parameters().push({name:e.observable(n),value:e.observable(t),type:e.observable(null)})})),c)t.template="inline",r.template(JSON.stringify(ct(c),null,4));else if(o)return t.template||(t.template="uri"),it.trace({source:rt,action:yt,data:t}),this._loadTemplate(o).then((function(n){return r.template(n),r}));return this.learnMoreHotSpot(lt(this._container,tt.fx.environment.hubsLinks.templateDeployment,this._telemetryId,"learnmore")),it.trace({source:rt,action:yt,data:t}),Q(r)},r.prototype._loadTemplateAndSetInEditScope=function(n){var t=this;it.trace({source:rt,action:ri,data:{template:n}});this._loadTemplate(n).then((function(n){t._dataModel.template(n)}))},r.prototype._loadTemplate=function(n){var i=this;return this.statusBar(null),w.loadTemplate(n,this._cloudName).then((function(r){if(i._templateUri=n,n.toLowerCase().indexOf("/azure-quickstart-templates/")>
-1){var f=new g.UriBuilder(n),e=f.getRelativePath(),u=e.split("/"),o=u[u.length-2]||n;i._updateTemplateDetailsForGitHubTemplate(o)}else i.learnMoreHotSpot(lt(i._container,tt.fx.environment.hubsLinks.templateDeployment,i._telemetryId,"learnmore")),i.templateName(t.customizedTemplate);return r}),(function(){return i.statusBar({state:3,text:t.errorLoadingTemplate.format(n)}),""}))},r.prototype._updateTemplateDetailsForGitHubTemplate=function(n){var r=this;this.templateName(n);this._gitHubLink=i.pathJoin("/",ft,n);this.learnMoreHotSpot(lt(this._container,this._gitHubLink,this._telemetryId,"learnmore"));w.getMetadataFile(w.getMetadaUri(n)).then((function(n){if(n){var i=JSON.parse(n);r.title(i.itemDisplayName);r.subtitle(t.quickstartTemplate)}}))},r.prototype._postValidationCallback=function(n){if(at)return Q(d.getValidationResult());var t=k.checkResourceValidity(n.properties.validatedResources||[],n.properties.parameters||{},this.subscriptionsDropDown.subscriptionId(),this._cloudName);return Q.allSettled(
t).then((function(n){var t=[];if(n.forEach((function(n){n.state==="fulfilled"&&((n.value||{}).valid||t.push(n.value))})),!t.length)return d.getValidationResult();throw{error:{code:"ValidationError",message:"Error validating template",details:t.map((function(n){return{message:n.message,code:"ClientSideValidationError"}}))}};}))},r.prototype._getTemplateDeploymentOptions=function(n,t){var i=this.armProvisioner.armProvisioningConfig&&this.armProvisioner.armProvisioningConfig.galleryCreateOptions||{},r=n.subscription(),f=r.subscriptionId,e=n.resourceGroup(),l=n.location(),s=e.value.name,a=e.mode===1?l.name:e.value.location,v="/subscriptions/"+f+"/resourcegroups/"+s,h=n.template(),o=this._templateUri&&!n.templateCustomized(),c=si(n.parameters(),this._defaultValues),y={subscriptionId:f,resourceGroupName:s,resourceGroupLocation:a,parameters:c,deploymentName:i&&i.deploymentName,resourceProviders:w.getResourceProvidersFromTemplate(h),resourceId:v,templateJson:o?null:h,templateLinkUri:o?this._templateUri:
null,cloudName:this._cloudName};return t===0&&it.trace({source:rt,action:ii,data:{telemetryId:this._telemetryId,context:this._context,"package":i&&i.galleryItem&&i.galleryItem.id,template:o?"uri":"inline",edited:n.templateCustomized,parameters:n.parameters().length,emptyParameters:u.keys(c).length,subscription:{id:f,state:r.state,quotaId:r.subscriptionPolicies&&r.subscriptionPolicies.quotaId}}}),y},r.prototype._supplyProvisioningPromise=function(n,t){return Q.resolve(this._getTemplateDeploymentOptions(n,t))},r})(nt.Form.ViewModel);n.CustomDeploymentBladeVM=ci})(d||(d={})),d}));define("HubsExtension/_generated/Blades/CustomDeployment.css",["require","exports"],(function(){"use strict";return".ext-hubs-customdeploy-emptycontainer{display:flex;flex-direction:column;padding-left:15px;color:gray;width:500px}.ext-hubs-customdeploy-emptyheader{font-size:20px;margin-bottom:15px;margin-top:10px}.ext-hubs-customdeploy-emptylink{display:flex;flex-direction:row;align-items:center;margin-left:12px;margin-bottom:15px}.ext-hubs-customdeploy-emptylinkicon{width:20px;height:20px;margin-right:5px}.ext-hubs-customdeploy-emptylinktext{font-size:16px}.ext-hubs-customdeploy-templatelist{list-style-type:none;padding:0;margin:0}.ext-hubs-customdeploy-emptylink:hover{text-decoration:underline}.ext-hubs-customdeploy-githubsection{font-size:14px;margin-left:12px}.ext-hubs-customdeploy-hyperlink{width:12px;height:12px;display:inline-block;margin-left:3px}.ext-hubs-customdeploy-leftaligned{width:700px}.ext-hubs-customdeploy-header{text-transform:uppercase;font-weight:bold;border-bottom:1px solid #d3d3d3;padding-bottom:7px;padding-top:15px}.ext-hubs-customdeploy-large-width{width:700px}.ext-hubs-customdeploy-headerdetails{margin:10px;width:100%;display:flex;flex-direction:row}.ext-hubs-customdeploy-headerdetails-icon{width:30px;height:30px;margin-right:10px;margin-top:5px}.ext-hubs-customdeploy-headerdetails-text{flex:1;max-width:455px}.ext-hubs-customdeploy-headerdetails-text-title{padding-bottom:5px}.ext-hubs-customdeploy-leftalign-rgdropdown{margin-left:32%;margin-top:-5px;margin-bottom:5px;width:66%}.ext-hubs-customdeploy-headerdetails-right{text-align:center;margin-right:10px}.ext-hubs-customdeploy-headerdetails-rightitem{display:inline-block;margin-left:10px;max-width:85px}.ext-hubs-customdeploy-headerdetails-righticon{width:20px;height:20px;margin:auto}.ext-hubs-customdeploy-legaltext{margin-bottom:20px;height:120px;border:solid 1px #d3d3d3;padding:5px;overflow:auto}.ext-hubs-customdeploy-legaltext-text{white-space:pre-wrap}.ext-hubs-customdeploy-legaltext-link:not(:first-child){margin-left:10px;padding-left:10px;border-left:1px solid #d3d3d3}"})
);define("HubsExtension/_generated/Blades/DeployToAzure",["require","exports","f","HubsExtension/_generated/Blades/CustomDeployment.css","HubsExtension/Deployments/ViewModels/CustomDeploymentBladeVM"],(function(n,t,i,r){"use strict";var u;return (function(n){n.blade={name:"DeployToAzure",viewModelName:"Deployments$CustomDeploymentBladeVM",lenses:[],width:0,initialDisplayState:2,style:3,actionBar:{name:"",actionBarKind:1,bindings:[]},templateBlade:{htmlTemplate:null,parameterProvider:!0,partSize:0,htmlTemplateInline:{file:"CustomDeployment.html",content:'ï»¿<!-- ko if: emptyTemplate --> <div class="ext-hubs-customdeploy-emptycontainer"> <div> <div class="ext-hubs-customdeploy-emptyheader" data-bind="text: strings.learnHeader"><\/div> <a class="ext-hubs-customdeploy-emptylink" data-bind="attr: { href: learnMoreLink }" target="_blank"> <span class="ext-hubs-customdeploy-emptylinkicon" data-bind="image: learnMoreIcon"><\/span> <span class="ext-hubs-customdeploy-emptylinktext" data-bind="text: strings.readDocs"><\/span> <span class="msportalfx-fill ext-hubs-customdeploy-hyperlink" data-bind="image: MsPortalFx.Base.Images.Hyperlink()"><\/span> <\/a> <a class="ext-hubs-customdeploy-emptylink" data-bind="click: editTemplateClick, clickBubble: false" role="button" href="#"> <span class="ext-hubs-customdeploy-emptylinkicon" data-bind="image: editTemplateIcon"><\/span> <span class="ext-hubs-customdeploy-emptylinktext" data-bind="text: strings.emptyTemplate"><\/span> <\/a> <\/div> <div> <div class="ext-hubs-customdeploy-emptyheader" data-bind="text: strings.commonHeader"><\/div> <ul class="ext-hubs-customdeploy-templatelist" data-bind="foreach: commonTemplates"> <li> <a class="ext-hubs-customdeploy-emptylink" data-bind="click: optionClick, clickBubble: false" role="button" href="#"> <span class="ext-hubs-customdeploy-emptylinkicon" data-bind="image: icon"><\/span> <span class="ext-hubs-customdeploy-emptylinktext" data-bind="text: text"><\/span> <\/a> <\/li> <\/ul> <\/div> <div> <div class="ext-hubs-customdeploy-emptyheader" data-bind="text: strings.loadGitHubTemplate"><\/div> <div class="ext-hubs-customdeploy-githubsection" data-bind="pcControl: quickstartTemplateCustomHtml"><\/div> <\/div> <\/div> <!-- /ko --> <!-- ko ifnot: emptyTemplate --> <div data-bind="css: { ext-hubs-customdeploy-leftaligned: isLeftAligned() }"> <div class="ext-hubs-customdeploy-header" data-bind="text: templateHeader"><\/div> <div class="ext-hubs-customdeploy-headerdetails"> <div data-bind="image: templateIcon" class="ext-hubs-customdeploy-headerdetails-icon"><\/div> <div class="ext-hubs-customdeploy-headerdetails-text"> <div data-bind="text: templateName" class="msportalfx-text-header-regular msportalfx-text-ellipsis ext-hubs-customdeploy-headerdetails-text-title"><\/div> <div data-bind="text: templateDescription" class="msportalfx-text-ellipsis"><\/div> <\/div> <div class="ext-hubs-customdeploy-headerdetails-right"> <div data-bind="pcControl: editTemplateHotSpot" class="ext-hubs-customdeploy-headerdetails-rightitem"> <div class="ext-hubs-customdeploy-headerdetails-righticon" data-bind="image: editTemplateIcon"><\/div> <div class="msportalfx-text-ellipsis" data-bind="text: editTemplateText"><\/div> <\/div> <!-- ko if: showEditParametersButton --> <div data-bind="pcControl: editParametersHotSpot" class="ext-hubs-customdeploy-headerdetails-rightitem"> <div class="ext-hubs-customdeploy-headerdetails-righticon" data-bind="image: editParametersIcon"><\/div> <div class="msportalfx-text-ellipsis" data-bind="text: editParametersText"><\/div> <\/div> <!-- /ko --> <!-- ko if: learnMoreHotSpot --> <div data-bind="pcControl: learnMoreHotSpot" class="ext-hubs-customdeploy-headerdetails-rightitem"> <div class="ext-hubs-customdeploy-headerdetails-righticon" data-bind="image: learnMoreIcon"><\/div> <div class="msportalfx-text-ellipsis" data-bind="text: strings.learnMore"><\/div> <\/div> <!-- /ko --> <\/div> <\/div> <div class="msportalfx-form" data-bind="formElement: generalSection, css: { msportalfx-form-regular: isLeftAligned() }"><\/div> <\/div> <!-- /ko -->'},
styleSheets:[{file:"Blades/CustomDeployment.css",content:r}]},attributes:0}})(u||(u={})),u}))